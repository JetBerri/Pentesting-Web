# WhatWeb

![logo](https://morningstarsecurity.com/wp-content/uploads/2019/02/WhatWeb-Logo-800px.png "WhatWeb Logo")

# ¿Qué es WhatWeb?

WhatWeb es una herramienta de línea de comandos que nos permite recopilar información sobre las tecnologías utilizadas en un sitio web, incluyendo sus respectivas versiones

# Escaneo simple

Su uso es bastante facil, supongamos que queremos saber que tecnologias utiliza [mi sitio web](https://0nyxmind.github.io), el comando a utilizar sería el siguiente

```
❯ whatweb https://0nyxmind.github.io
```

El resultado se vería así:

```
❯ whatweb https://0nyxmind.github.io
https://0nyxmind.github.io [200 OK] Bootstrap, HTML5, HTTPServer[GitHub.com], IP[185.199.109.153], JQuery, MetaGenerator[Jekyll v4.3.1], Open-Graph-Protocol[website], Script[application/ld+json], Strict-Transport-Security[max-age=31556952], Title[ONYX], UncommonHeaders[permissions-policy,access-control-allow-origin,x-proxy-cache,x-github-request-id,x-served-by,x-cache-hits,x-timer,x-fastly-request-id], Via-Proxy[1.1 varnish]
```

Tambien podemos concatenar varios sitios web

```
❯ whatweb https://0nyxmind.github.io https://google.com
https://google.com [301 Moved Permanently] Country[UNITED STATES][US], HTTPServer[gws], IP[172.217.173.238], RedirectLocation[https://www.google.com/], Title[301 Moved], UncommonHeaders[alt-svc], X-Frame-Options[SAMEORIGIN], X-XSS-Protection[0]
https://0nyxmind.github.io [200 OK] Bootstrap, HTML5, HTTPServer[GitHub.com], IP[185.199.111.153], JQuery, MetaGenerator[Jekyll v4.3.1], Open-Graph-Protocol[website], Script[application/ld+json], Strict-Transport-Security[max-age=31556952], Title[ONYX], UncommonHeaders[permissions-policy,access-control-allow-origin,x-proxy-cache,x-github-request-id,x-served-by,x-cache-hits,x-timer,x-fastly-request-id], Via-Proxy[1.1 varnish]
```

# Escanear lista de sitios web

Supongamos que queremos obtener información de varios sitios web, para eso tenemos el parámetro

- **--input-file**

Con este parámetro, indicamos a la herramienta que deseamos proporcionarle un archivo que contenga varios dominios para que los escanee.

```
❯ echo "https://www.amazon.com" > sites
❯ echo "https://www.youtube.com" >> sites
❯ echo "https://www.google.com" >> sites
❯ whatweb --input-file sites
https://www.google.com [200 OK] Cookies[1P_JAR,AEC,NID], Country[UNITED STATES][US], HTML5, HTTPServer[gws], HttpOnly[AEC,NID], IP[142.251.133.68], Script, Title[Google], UncommonHeaders[alt-svc], X-Frame-Options[SAMEORIGIN], X-XSS-Protection[0]
https://www.amazon.com [200 OK] Content-Language[en-US], Cookies[i18n-prefs,session-id,session-id-time,skin,sp-cdn], Country[UNITED STATES][US], Frame, HTML5, HTTPServer[Server], HttpOnly[sp-cdn], IP[104.94.172.82], Object, Open-Graph-Protocol[164734381262], Script[a-state,application/json,text/javascript,text/x-lazy-loaded-content], Strict-Transport-Security[max-age=47474747; includeSubDomains; preload], Title[Amazon.com. Spend less. Smile more.], UncommonHeaders[x-amz-rid,content-security-policy-report-only,accept-ch-lifetime,content-security-policy,x-content-type-options,accept-ch,akamai-cache-status], X-Frame-Options[SAMEORIGIN], X-UA-Compatible[IE=edge], X-XSS-Protection[1;]
https://www.youtube.com [200 OK] Cookies[DEVICE_INFO,GPS,VISITOR_INFO1_LIVE,YSC], Country[UNITED STATES][US], Frame, HTML5, HTTPServer[ESF], HttpOnly[DEVICE_INFO,GPS,VISITOR_INFO1_LIVE,YSC], IP[172.217.173.238], Open-Graph-Protocol[87741124305], OpenSearch[https://www.youtube.com/opensearch?locale=es_MX], Script, Strict-Transport-Security[max-age=31536000], Title[YouTube], UncommonHeaders[x-content-type-options,cross-origin-opener-policy-report-only,permissions-policy,report-to,alt-svc], X-Frame-Options[SAMEORIGIN], X-UA-Compatible[IE=edge], X-XSS-Protection[0]
```

# Agregar verbosidad

Si queremos que el programa nos muestre mucha más información sobre el escaneo, le podemos agregar el parámetro:

- **-v**

El resultado se vería así:

```
❯ whatweb https://www.google.com -v
WhatWeb report for https://www.google.com
Status    : 200 OK
Title     : Google
IP        : 142.251.133.68
Country   : UNITED STATES, US

Summary   : Cookies[1P_JAR,AEC,NID], HTML5, HTTPServer[gws], HttpOnly[AEC,NID], Script, UncommonHeaders[alt-svc], X-Frame-Options[SAMEORIGIN], X-XSS-Protection[0]

Detected Plugins:
[ Cookies ]
	Display the names of cookies in the HTTP headers. The 
	values are not returned to save on space. 

	String       : 1P_JAR
	String       : AEC
	String       : NID

[ HTML5 ]
	HTML version 5, detected by the doctype declaration 


[ HTTPServer ]
	HTTP server header string. This plugin also attempts to 
	identify the operating system from the server header. 

	String       : gws (from server string)

[ HttpOnly ]
	If the HttpOnly flag is included in the HTTP set-cookie 
	response header and the browser supports it then the cookie 
	cannot be accessed through client side script - More Info: 
	http://en.wikipedia.org/wiki/HTTP_cookie 

	String       : AEC,NID

[ Script ]
	This plugin detects instances of script HTML elements and 
	returns the script language/type. 


[ UncommonHeaders ]
	Uncommon HTTP server headers. The blacklist includes all 
	the standard headers and many non standard but common ones. 
	Interesting but fairly common headers should have their own 
	plugins, eg. x-powered-by, server and x-aspnet-version. 
	Info about headers can be found at www.http-stats.com 

	String       : alt-svc (from headers)

[ X-Frame-Options ]
	This plugin retrieves the X-Frame-Options value from the 
	HTTP header. - More Info: 
	http://msdn.microsoft.com/en-us/library/cc288472%28VS.85%29.
	aspx

	String       : SAMEORIGIN

[ X-XSS-Protection ]
	This plugin retrieves the X-XSS-Protection value from the 
	HTTP header. - More Info: 
	http://msdn.microsoft.com/en-us/library/cc288472%28VS.85%29.
	aspx

	String       : 0

HTTP Headers:
	HTTP/1.1 200 OK
	Date: Mon, 27 Feb 2023 21:08:50 GMT
	Expires: -1
	Cache-Control: private, max-age=0
	Content-Type: text/html; charset=ISO-8859-1
```
# Escaneos agresivos
  
Si queremos obtener mucha mas informacion sobre una página web, debemos usar el parámetro

- **-a=NIVEL**

### Niveles disponibles
- **-a 1** -> Método por defecto
- **-a 3** -> Método agresivo
- **-a 4** -> Método Heavy

## Compactar parámetros

Una combinación bastante buena que podemos usar son las del parámetro **-a** y **-v**

Ejemplo de uso: 

```
❯ whatweb https://www.google.com -v -a 3
```

# Agregar Headers

En caso de que queramos agregar algún header a la petición que tramita whatweb, debemos usar el parámetro

- **-H**

Y para modificar el **User-Agent** de la petición, debemos usar el parámetro 

- **-U**
